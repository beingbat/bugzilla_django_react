{% extends 'base.html' %}

{% block content %}

  <div class="pt-4 mx-5">

    <p>
      <strong>
        Type:
      </strong>
      {{ bug.type }}
      <br> <strong>
        Found in Project:
      </strong>
      {{ bug.project.name }}
      <br>
      <strong>
        Bug Name:
      </strong>
      {{ bug.title }}
      <br>
      <strong>
        Bug Description:
      </strong>
      {{ bug.description }}
      <br>
      <br>
    </p>

    <p>
      <strong>
        Reported By:
      </strong>


    {% if moderator %}
      <a class ="btn bnt-light" href="{% url 'user-detail' pk=bug.creator.user.id%}" >
        ID: {{ bug.creator.user.id }};
        Name: {{ bug.creator.user.get_full_name }}
      </a>
    {% else %}
      ID: {{ bug.creator.user.id }};
      Name: {{ bug.creator.user.get_full_name }}
    {% endif %}

    <p>
      <strong>
        Assigned To:
      </strong>
      {% if bug.assigned_to and moderator %}
        <a class ="btn bnt-light" href="{% url 'user-detail' pk=bug.assigned_to.user.id%}" >
          ID: {{ bug.assigned_to.user.id }};
          Name: {{ bug.assigned_to.user.get_full_name }}
        </a>
      {% elif bug.assigned_to %}
        ID: {{ bug.assigned_to.user.id }};
        Name: {{ bug.assigned_to.user.get_full_name }}
      {% else %}
        None
      {% endif %}
    </p>
    <br>

    <p>
      <strong>
        Deadline:
      </strong>
      {{ bug.deadline }}
      <br>
      <strong>
        Screenshot:
      </strong>
      {% if bug.screenshot %}
        {{ bug.screenshot }}
      {% else %}
      N/A
      {% endif %}
      <br>
      <strong>
        Status:
      </strong>
      {{ bug.status }}
      <br>
    </p>

    <p>
      <strong>
        Change Status:
      </strong>
      <form method="post">
        {% csrf_token %}
        {{ status_form.as_p }}

        <button class = "btn btn-dark"
                type="submit">
                Change
        </button>
      </form>
    </p>

    <br>
    {% if designation == manager %}
    <a class="btn btn-dark"
        href="{% url 'update-bug' pk=bug.uuid%}">
      Edit
    </a>

    <a class="btn btn-dark"
        href="{% url 'delete-bug' pk=bug.uuid%}">
      Delete
    </a>
    {% endif %}
    <br>
    <a class="mt-3 btn btn-light"
      {% if designation == manager or designation == qaengineer %}
          href="{% url 'detail-project' pk=bug.project.pk%}"
      {% else %}
          href="{% url 'dashboard'%}"
      {% endif %}
      >
      Go Back
      </a>
  </div>

{%endblock%}
